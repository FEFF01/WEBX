!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=34)}({34:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(36),t)},36:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Link=t.RouterLink=t.Router=void 0;const r=n(37),{Subscriber:i,action:o,autorun:a,observable:u,computed:s,runInAction:f}=_obb;function l(e){let t,n=i.PARENT,o=null,a=new i((function(){t||(t=new r.Routing(e,n)),t.update(),l()}));if(a.mount(),!o){function u(){void 0!==n.parent&&n.update()}return a.once("unmount",(function(){r.removeRouteChangeListener(u)})),void r.addRouteChangeListener(u)}let f=s((function(){return e.component}),n)();function l(){let r=t.match();null!==o&&!o!=!r?void 0!==n.parent&&n.update():(e.match=r,o=r)}return r.addRouteChangeListener(l),a.once("unmount",(function(){r.removeRouteChangeListener(l)})),f?f(e):e.children}t.Router=l;const c=["mode","tag","children","to","action"];function h(e,t){let n,o=i.PARENT,u=t&&r.getParentRouting(o),f=s((function(){return n=e.tag||"a",_webx.createElement(n)}),o)();if(_webx.addEventListener(f,"click",(function(n){n.preventDefault();let i=location.href,o=r.getUrl(e,u);switch(e.action){case"back":history.back(),e.to&&setTimeout((function(){i!==o&&history.replaceState(null,null,o)}),6);break;case"replace":t&&i===o||history.replaceState(null,null,o);break;case"append":default:t&&i===o||history.pushState(null,null,o)}})),/^a$/i.test(n)&&e.hasOwnProperty("to")&&!e.hasOwnProperty("href")){function l(){f.href=r.getUrl(e,u)}let t=new i(l);t.mount(),r.addRouteChangeListener(l),t.once("unmount",(function(){r.removeRouteChangeListener(l)}))}for(let t in e){if(c.includes(t))continue;let n=/^(on[^_-]*)|(value|id|checked)$/.test(t);a((function(){_webx.setAttribute(f,t,e[t],n)}))}return a((function(){let t=f.childNodes,n=e.children,r=0;if(n)for(;r<n.length;r++){let e=n[r],i=t[r];t.length<=r?_webx.appendChild(f,e):i!==e&&(_webx.insertBefore(f,e,i),n.includes(i)||_webx.removeNode(i))}for(;t.length>r;)f.removeChild(t[r])})),f}t.Link=function(e){return h(e,!1)},t.RouterLink=function(e){return h(e,!0)},t.default=l},37:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeRouteChangeListener=t.addRouteChangeListener=t.getParentRouting=t.getUrl=t.Routing=void 0;const{runInAction:r,action:i}=_obb,{pathToRegexp:o}=n(38),a=new WeakMap;let u=!1;const s=i((function(){for(let e of Array.from(f))e()}));for(let e of["pushState","replaceState"]){let t=history[e];history[e]=function(){t.apply(history,arguments),u&&s()}}const f=new Set;function l(e,t){if(/^[^#]*\:/.test(t))return t;let n=/^\s*\/+/.exec(t);if(n)return((t=t.slice(n[0].length))&&"/")+t;for(n=/^(\s*\.\/+)+/.exec(t),e=e.replace(/\/*$/,""),n&&(t=t.slice(n[0].length));n=/^\s*\.\.\/+(\s*\.\/+)*/.exec(t);)t=t.slice(n[0].length),e=e.replace(/\/+[^\/]*$/,"");return e+(t&&"/")+t}function c(){let{origin:e,pathname:t,hash:n,protocol:r}=location;return"blob:"===r&&(t=t.slice(e.length),e=r+e),{origin:e,pathname:t,hash:n}}function h(e){for(;e=e.parent;){let t=a.get(e);if(t)return t}}t.addRouteChangeListener=function(e){f.add(e),u||(addEventListener("hashchange",s),addEventListener("popstate",s),u=!0)},t.removeRouteChangeListener=function(e){f.delete(e),f.size||(u=!1,removeEventListener("hashchange",s),removeEventListener("popstate",s))},t.getUrl=function(e,t){let n=e.mode||(t?t.mode:"hash"),r=e.to,{origin:i,pathname:o,hash:a}=c();if(t&&(a=t.hash,o=t.path),r)if("hash"===n)a=l(a.replace(/^#+/,""),r),a&&(a="#"+a);else{o=l(o,r);let e=/#+\/*([\s\S]*)$/.exec(o);e&&(o=o.slice(0,-e[0].length),a=(e[1]&&"#/")+e[1])}return i+o+a},t.getParentRouting=h;t.Routing=class{constructor(e,t){this.options=e,this.subscriber=t,this.patterns=[],a.set(t,this),this.parent=h(t)}update(){let e=this.options;this.mode=e.mode||this.parent&&this.parent.mode||"hash";let t=e.path;t?t instanceof Array||(t=[t]):t=[""];let n=this.patterns;n.length=0;for(let e of t){let t=0,r=[],i=/^\s*\/+/.exec(e);if(i)e=e.slice(i[0].length),t=-1;else for((i=/^(\s*\.\/+)+/.exec(e))&&(e=e.slice(i[0].length));i=/^\s*\.\.\/+(\s*\.\/+)*/.exec(e);)e=e.slice(i[0].length),t+=1;n.push([o("/"+e,r,{end:!1}),r,t,e.split(/\/+/).length])}n.sort((function(e,t){return t[3]-e[3]}))}match(){let e=c(),t="history"!==this.mode;function n(e,t){return t===("history"!==e.mode)?e:e.parent?n(e.parent,t):void 0}let r=this.parent;if(r){let e=n(r,!0),i=n(r,!1);this.hash=t?e?e.hash:"":r.hash,this.path=t?r.path:i?i.path:"",this.last_hash=r.last_hash,this.last_path=r.last_path}else this.hash=t?"":e.hash,this.path=t?e.pathname:"",this.last_hash=e.hash.slice(1),this.last_path=e.pathname;let i=t?"last_hash":"last_path",o=this[i],a=t?e.hash.slice(1):e.pathname;for(let[e,n,r]of this.patterns){let u=o;if(-1===r)u=a;else if(r>0){let e=a.slice(0,a.length-u.length);for(let t=0;t<r;t++)e=e.replace(/\/+[^\/]*$/,"");u=a.slice(e.length)}let s=e.exec(u);if(s){let e={};this[t?"hash":"path"]=a.slice(0,a.length-u.length)+s[0];for(let t=1,r=n.length+1;t<s.length&&t<r;t++)if(void 0!==s[t]){let r=n[t-1].name;void 0===e[r]?e[r]=s[t]:(e[r]instanceof Array||(e[r]=[e[r]]),e[r].push(s[t]))}return this[i]=u.slice(s[0].length),e}}}}},38:function(e,t,n){"use strict";function r(e,t){void 0===t&&(t={});for(var n=function(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)t.push({type:"CHAR",index:n,value:e[n++]});else{var i=1,o="";if("?"===e[u=n+1])throw new TypeError('Pattern cannot start with "?" at '+u);for(;u<e.length;)if("\\"!==e[u]){if(")"===e[u]){if(0===--i){u++;break}}else if("("===e[u]&&(i++,"?"!==e[u+1]))throw new TypeError("Capturing groups are not allowed at "+u);o+=e[u++]}else o+=e[u++]+e[u++];if(i)throw new TypeError("Unbalanced pattern at "+n);if(!o)throw new TypeError("Missing pattern at "+n);t.push({type:"PATTERN",index:n,value:o}),n=u}else{for(var a="",u=n+1;u<e.length;){var s=e.charCodeAt(u);if(!(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||95===s))break;a+=e[u++]}if(!a)throw new TypeError("Missing parameter name at "+n);t.push({type:"NAME",index:n,value:a}),n=u}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}(e),r=t.prefixes,i=void 0===r?"./":r,o="[^"+s(t.delimiter||"/#?")+"]+?",a=[],u=0,f=0,l="",c=function(e){if(f<n.length&&n[f].type===e)return n[f++].value},h=function(e){var t=c(e);if(void 0!==t)return t;var r=n[f],i=r.type,o=r.index;throw new TypeError("Unexpected "+i+" at "+o+", expected "+e)},p=function(){for(var e,t="";e=c("CHAR")||c("ESCAPED_CHAR");)t+=e;return t};f<n.length;){var d=c("CHAR"),v=c("NAME"),g=c("PATTERN");if(v||g){var m=d||"";-1===i.indexOf(m)&&(l+=m,m=""),l&&(a.push(l),l=""),a.push({name:v||u++,prefix:m,suffix:"",pattern:g||o,modifier:c("MODIFIER")||""})}else{var x=d||c("ESCAPED_CHAR");if(x)l+=x;else if(l&&(a.push(l),l=""),c("OPEN")){m=p();var y=c("NAME")||"",b=c("PATTERN")||"",E=p();h("CLOSE"),a.push({name:y||(b?u++:""),pattern:y&&!b?o:b,prefix:m,suffix:E,modifier:c("MODIFIER")||""})}else h("END")}}return a}function i(e,t){return o(r(e,t),t)}function o(e,t){void 0===t&&(t={});var n=f(t),r=t.encode,i=void 0===r?function(e){return e}:r,o=t.validate,a=void 0===o||o,u=e.map((function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",n)}));return function(t){for(var n="",r=0;r<e.length;r++){var o=e[r];if("string"!=typeof o){var s=t?t[o.name]:void 0,f="?"===o.modifier||"*"===o.modifier,l="*"===o.modifier||"+"===o.modifier;if(Array.isArray(s)){if(!l)throw new TypeError('Expected "'+o.name+'" to not repeat, but got an array');if(0===s.length){if(f)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var c=0;c<s.length;c++){var h=i(s[c],o);if(a&&!u[r].test(h))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but got "'+h+'"');n+=o.prefix+h+o.suffix}}else if("string"!=typeof s&&"number"!=typeof s){if(!f){var p=l?"an array":"a string";throw new TypeError('Expected "'+o.name+'" to be '+p)}}else{h=i(String(s),o);if(a&&!u[r].test(h))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but got "'+h+'"');n+=o.prefix+h+o.suffix}}else n+=o}return n}}function a(e,t){var n=[];return u(c(e,n,t),n,t)}function u(e,t,n){void 0===n&&(n={});var r=n.decode,i=void 0===r?function(e){return e}:r;return function(n){var r=e.exec(n);if(!r)return!1;for(var o=r[0],a=r.index,u=Object.create(null),s=function(e){if(void 0===r[e])return"continue";var n=t[e-1];"*"===n.modifier||"+"===n.modifier?u[n.name]=r[e].split(n.prefix+n.suffix).map((function(e){return i(e,n)})):u[n.name]=i(r[e],n)},f=1;f<r.length;f++)s(f);return{path:o,index:a,params:u}}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function f(e){return e&&e.sensitive?"":"i"}function l(e,t,n){void 0===n&&(n={});for(var r=n.strict,i=void 0!==r&&r,o=n.start,a=void 0===o||o,u=n.end,l=void 0===u||u,c=n.encode,h=void 0===c?function(e){return e}:c,p="["+s(n.endsWith||"")+"]|$",d="["+s(n.delimiter||"/#?")+"]",v=a?"^":"",g=0,m=e;g<m.length;g++){var x=m[g];if("string"==typeof x)v+=s(h(x));else{var y=s(h(x.prefix)),b=s(h(x.suffix));if(x.pattern)if(t&&t.push(x),y||b)if("+"===x.modifier||"*"===x.modifier){var E="*"===x.modifier?"?":"";v+="(?:"+y+"((?:"+x.pattern+")(?:"+b+y+"(?:"+x.pattern+"))*)"+b+")"+E}else v+="(?:"+y+"("+x.pattern+")"+b+")"+x.modifier;else v+="("+x.pattern+")"+x.modifier;else v+="(?:"+y+b+")"+x.modifier}}if(l)i||(v+=d+"?"),v+=n.endsWith?"(?="+p+")":"$";else{var w=e[e.length-1],R="string"==typeof w?d.indexOf(w[w.length-1])>-1:void 0===w;i||(v+="(?:"+d+"(?="+p+"))?"),R||(v+="(?="+d+"|"+p+")")}return new RegExp(v,f(n))}function c(e,t,n){return e instanceof RegExp?function(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,i=n.exec(e.source);i;)t.push({name:i[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),i=n.exec(e.source);return e}(e,t):Array.isArray(e)?function(e,t,n){var r=e.map((function(e){return c(e,t,n).source}));return new RegExp("(?:"+r.join("|")+")",f(n))}(e,t,n):function(e,t,n){return l(r(e,n),t,n)}(e,t,n)}n.r(t),n.d(t,"parse",(function(){return r})),n.d(t,"compile",(function(){return i})),n.d(t,"tokensToFunction",(function(){return o})),n.d(t,"match",(function(){return a})),n.d(t,"regexpToFunction",(function(){return u})),n.d(t,"tokensToRegexp",(function(){return l})),n.d(t,"pathToRegexp",(function(){return c}))}});
//# sourceMappingURL=router.js.map